import{o as h,a0 as ue,h as fe,a1 as $e,i as me,K as V,Q as Pe,u as Te,y as H,l as Le,a2 as Me,I as we,U as De,$ as Ce,b as ke,m as _e,_ as be,p as Fe,L as j,x as Ae,j as Ne,t as Be,v as Qe,A as J,B as Ue,C as Ke,a3 as Ve,a4 as He,R as je,q as Ge,d as qe,D as ze,E as Je,J as Xe,a5 as We,s as Ze,n as se,a6 as Ye,a7 as et,a as tt,f as U,S as nt,c as ot,V as rt,W as at,X as ce,a8 as I,r as it,e as P,a9 as lt,F as pe,aa as ie,g as st,Y as ut,Z as dt}from"./use-text-value-Bk0dxVI1.js";import{r as i,R as y,G as A}from"./index-BYXeMeYp.js";function ct(e,t,o){let[n,r]=i.useState(o),u=e!==void 0,m=i.useRef(u),c=i.useRef(!1),l=i.useRef(!1);return u&&!m.current&&!c.current?(c.current=!0,m.current=u,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!u&&m.current&&!l.current&&(l.current=!0,m.current=u,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[u?e:n,h(b=>(u||r(b),t==null?void 0:t(b)))]}function pt(e){let[t]=i.useState(e);return t}function ve(e={},t=null,o=[]){for(let[n,r]of Object.entries(e))ge(o,xe(t,n),r);return o}function xe(e,t){return e?e+"["+t+"]":t}function ge(e,t,o){if(Array.isArray(o))for(let[n,r]of o.entries())ge(e,xe(t,n.toString()),r);else o instanceof Date?e.push([t,o.toISOString()]):typeof o=="boolean"?e.push([t,o?"1":"0"]):typeof o=="string"?e.push([t,o]):typeof o=="number"?e.push([t,`${o}`]):o==null?e.push([t,""]):ve(o,t,e)}function ft(e){var t,o;let n=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(n){for(let r of n.elements)if(r!==e&&(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image")){r.click();return}(o=n.requestSubmit)==null||o.call(n)}}let mt=i.createContext(null);function bt({children:e}){let t=i.useContext(mt);if(!t)return y.createElement(y.Fragment,null,e);let{target:o}=t;return o?A.createPortal(y.createElement(y.Fragment,null,e),o):null}function vt({data:e,form:t,disabled:o,onReset:n,overrides:r}){let[u,m]=i.useState(null),c=ue();return i.useEffect(()=>{if(n&&u)return c.addEventListener(u,"reset",n)},[u,t,n]),y.createElement(bt,null,y.createElement(xt,{setForm:m,formId:t}),ve(e).map(([l,b])=>y.createElement(fe,{features:me.Hidden,...$e({key:l,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:t,disabled:o,name:l,value:b,...r})})))}function xt({setForm:e,formId:t}){return i.useEffect(()=>{if(t){let o=document.getElementById(t);o&&e(o)}},[e,t]),t?null:y.createElement(fe,{features:me.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:o=>{if(!o)return;let n=o.closest("form");n&&e(n)}})}function gt(e,t){return e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&"id"in e&&"id"in t?e.id===t.id:e===t}function ht(e=gt){return i.useCallback((t,o)=>{if(typeof e=="string"){let n=e;return(t==null?void 0:t[n])===(o==null?void 0:o[n])}return e(t,o)},[e])}function St(e,t){let[o,n]=i.useState(t);return!e&&o!==t&&n(t),e?o:t}var Ot=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ot||{}),yt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(yt||{}),Et=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Et||{}),It=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetOptionsElement=8]="SetOptionsElement",e))(It||{});function le(e,t=o=>o){let o=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=st(t(e.options.slice()),u=>u.dataRef.current.domRef.current),r=o?n.indexOf(o):null;return r===-1&&(r=null),{options:n,activeOptionIndex:r}}let Rt={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1,__demoMode:!1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:o}=e.dataRef.current,n=e.options.findIndex(r=>o(r.dataRef.current.value));return n!==-1&&(t=n),{...e,listboxState:0,activeOptionIndex:t,__demoMode:!1}},2(e,t){var o,n,r,u,m;if(e.dataRef.current.disabled||e.listboxState===1)return e;let c={...e,searchQuery:"",activationTrigger:(o=t.trigger)!=null?o:1,__demoMode:!1};if(t.focus===I.Nothing)return{...c,activeOptionIndex:null};if(t.focus===I.Specific)return{...c,activeOptionIndex:e.options.findIndex(p=>p.id===t.id)};if(t.focus===I.Previous){let p=e.activeOptionIndex;if(p!==null){let f=e.options[p].dataRef.current.domRef,S=ie(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.current.disabled});if(S!==null){let x=e.options[S].dataRef.current.domRef;if(((n=f.current)==null?void 0:n.previousElementSibling)===x.current||((r=x.current)==null?void 0:r.previousElementSibling)===null)return{...c,activeOptionIndex:S}}}}else if(t.focus===I.Next){let p=e.activeOptionIndex;if(p!==null){let f=e.options[p].dataRef.current.domRef,S=ie(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.current.disabled});if(S!==null){let x=e.options[S].dataRef.current.domRef;if(((u=f.current)==null?void 0:u.nextElementSibling)===x.current||((m=x.current)==null?void 0:m.nextElementSibling)===null)return{...c,activeOptionIndex:S}}}}let l=le(e),b=ie(t,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});return{...c,...l,activeOptionIndex:b}},3:(e,t)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let o=e.searchQuery!==""?0:1,n=e.searchQuery+t.value.toLowerCase(),r=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+o).concat(e.options.slice(0,e.activeOptionIndex+o)):e.options).find(m=>{var c;return!m.dataRef.current.disabled&&((c=m.dataRef.current.textValue)==null?void 0:c.startsWith(n))}),u=r?e.options.indexOf(r):-1;return u===-1||u===e.activeOptionIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeOptionIndex:u,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,t)=>{let o={id:t.id,dataRef:t.dataRef},n=le(e,r=>[...r,o]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(n.activeOptionIndex=n.options.indexOf(o)),{...e,...n}},6:(e,t)=>{let o=le(e,n=>{let r=n.findIndex(u=>u.id===t.id);return r!==-1&&n.splice(r,1),n});return{...e,...o,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.optionsElement===t.element?e:{...e,optionsElement:t.element}},de=i.createContext(null);de.displayName="ListboxActionsContext";function X(e){let t=i.useContext(de);if(t===null){let o=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,X),o}return t}let W=i.createContext(null);W.displayName="ListboxDataContext";function G(e){let t=i.useContext(W);if(t===null){let o=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,G),o}return t}function $t(e,t){return U(t.type,Rt,e,t)}let Pt=i.Fragment;function Tt(e,t){var o;let n=tt(),{value:r,defaultValue:u,form:m,name:c,onChange:l,by:b,invalid:p=!1,disabled:f=n||!1,horizontal:S=!1,multiple:x=!1,__demoMode:a=!1,...O}=e;const N=S?"horizontal":"vertical";let k=H(t),T=pt(u),[R=x?[]:void 0,L]=ct(r,l,T),[D,E]=i.useReducer($t,{dataRef:i.createRef(),listboxState:a?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,optionsVisible:!1,buttonElement:null,optionsElement:null,__demoMode:a}),_=i.useRef({static:!1,hold:!1}),F=i.useRef(new Map),g=ht(b),w=i.useCallback(v=>U(s.mode,{1:()=>R.some($=>g($,v)),0:()=>g(R,v)}),[R]),s=i.useMemo(()=>({...D,value:R,disabled:f,invalid:p,mode:x?1:0,orientation:N,compare:g,isSelected:w,optionsPropsRef:_,listRef:F}),[R,f,p,x,D,F]);se(()=>{D.dataRef.current=s},[s]);let B=s.listboxState===0;nt(B,[s.buttonElement,s.optionsElement],(v,$)=>{var C;E({type:1}),ut($,dt.Loose)||(v.preventDefault(),(C=s.buttonElement)==null||C.focus())});let Z=i.useMemo(()=>({open:s.listboxState===0,disabled:f,invalid:p,value:R}),[s,f,R,p]),Y=h(v=>{let $=s.options.find(C=>C.id===v);$&&K($.dataRef.current.value)}),ee=h(()=>{if(s.activeOptionIndex!==null){let{dataRef:v,id:$}=s.options[s.activeOptionIndex];K(v.current.value),E({type:2,focus:I.Specific,id:$})}}),te=h(()=>E({type:0})),q=h(()=>E({type:1})),z=ue(),ne=h((v,$,C)=>{z.dispose(),z.microTask(()=>v===I.Specific?E({type:2,focus:I.Specific,id:$,trigger:C}):E({type:2,focus:v,trigger:C}))}),oe=h((v,$)=>(E({type:5,id:v,dataRef:$}),()=>E({type:6,id:v}))),K=h(v=>U(s.mode,{0(){return L==null?void 0:L(v)},1(){let $=s.value.slice(),C=$.findIndex(Re=>g(Re,v));return C===-1?$.push(v):$.splice(C,1),L==null?void 0:L($)}})),re=h(v=>E({type:3,value:v})),d=h(()=>E({type:4})),M=h(v=>{E({type:7,element:v})}),Q=h(v=>{E({type:8,element:v})}),ae=i.useMemo(()=>({onChange:K,registerOption:oe,goToOption:ne,closeListbox:q,openListbox:te,selectActiveOption:ee,selectOption:Y,search:re,clearSearch:d,setButtonElement:M,setOptionsElement:Q}),[]),[Se,Oe]=ot({inherit:!0}),ye={ref:k},Ee=i.useCallback(()=>{if(T!==void 0)return L==null?void 0:L(T)},[L,T]),Ie=j();return y.createElement(Oe,{value:Se,props:{htmlFor:(o=s.buttonElement)==null?void 0:o.id},slot:{open:s.listboxState===0,disabled:f}},y.createElement(rt,null,y.createElement(de.Provider,{value:ae},y.createElement(W.Provider,{value:s},y.createElement(at,{value:U(s.listboxState,{0:J.Open,1:J.Closed})},c!=null&&R!=null&&y.createElement(vt,{disabled:f,data:{[c]:R},form:m,onReset:Ee}),Ie({ourProps:ye,theirProps:O,slot:Z,defaultTag:Pt,name:"Listbox"}))))))}let Lt="button";function Mt(e,t){var o;let n=G("Listbox.Button"),r=X("Listbox.Button"),u=i.useId(),m=Te(),{id:c=m||`headlessui-listbox-button-${u}`,disabled:l=n.disabled||!1,autoFocus:b=!1,...p}=e,f=H(t,Le(),r.setButtonElement),S=Me(),x=h(s=>{switch(s.key){case P.Enter:ft(s.currentTarget);break;case P.Space:case P.ArrowDown:s.preventDefault(),A.flushSync(()=>r.openListbox()),n.value||r.goToOption(I.First);break;case P.ArrowUp:s.preventDefault(),A.flushSync(()=>r.openListbox()),n.value||r.goToOption(I.Last);break}}),a=h(s=>{switch(s.key){case P.Space:s.preventDefault();break}}),O=h(s=>{var B;if(it(s.currentTarget))return s.preventDefault();n.listboxState===0?(A.flushSync(()=>r.closeListbox()),(B=n.buttonElement)==null||B.focus({preventScroll:!0})):(s.preventDefault(),r.openListbox())}),N=h(s=>s.preventDefault()),k=we([c]),T=De(),{isFocusVisible:R,focusProps:L}=Ce({autoFocus:b}),{isHovered:D,hoverProps:E}=ke({isDisabled:l}),{pressed:_,pressProps:F}=_e({disabled:l}),g=i.useMemo(()=>({open:n.listboxState===0,active:_||n.listboxState===0,disabled:l,invalid:n.invalid,value:n.value,hover:D,focus:R,autofocus:b}),[n.listboxState,n.value,l,D,R,_,n.invalid,b]),w=be(S(),{ref:f,id:c,type:Fe(e,n.buttonElement),"aria-haspopup":"listbox","aria-controls":(o=n.optionsElement)==null?void 0:o.id,"aria-expanded":n.listboxState===0,"aria-labelledby":k,"aria-describedby":T,disabled:l||void 0,autoFocus:b,onKeyDown:x,onKeyUp:a,onKeyPress:N,onClick:O},L,E,F);return j()({ourProps:w,theirProps:p,slot:g,defaultTag:Lt,name:"Listbox.Button"})}let he=i.createContext(!1),wt="div",Dt=ce.RenderStrategy|ce.Static;function Ct(e,t){var o,n;let r=i.useId(),{id:u=`headlessui-listbox-options-${r}`,anchor:m,portal:c=!1,modal:l=!0,transition:b=!1,...p}=e,f=Ae(m),[S,x]=i.useState(null);f&&(c=!0);let a=G("Listbox.Options"),O=X("Listbox.Options"),N=Ne(a.optionsElement),k=Be(),[T,R]=Qe(b,S,k!==null?(k&J.Open)===J.Open:a.listboxState===0);Ue(T,a.buttonElement,O.closeListbox);let L=a.__demoMode?!1:l&&a.listboxState===0;Ke(L,N);let D=a.__demoMode?!1:l&&a.listboxState===0;Ve(D,{allowed:i.useCallback(()=>[a.buttonElement,a.optionsElement],[a.buttonElement,a.optionsElement])});let E=a.listboxState!==0,_=He(E,a.buttonElement)?!1:T,F=T&&a.listboxState===1,g=St(F,a.value),w=h(d=>a.compare(g,d)),s=i.useMemo(()=>{var d;if(f==null||!((d=f==null?void 0:f.to)!=null&&d.includes("selection")))return null;let M=a.options.findIndex(Q=>w(Q.dataRef.current.value));return M===-1&&(M=0),M},[f,a.options]),B=(()=>{if(f==null)return;if(s===null)return{...f,inner:void 0};let d=Array.from(a.listRef.current.values());return{...f,inner:{listRef:{current:d},index:s}}})(),[Z,Y]=je(B),ee=Ge(),te=H(t,f?Z:null,O.setOptionsElement,x),q=ue();i.useEffect(()=>{var d;let M=a.optionsElement;M&&a.listboxState===0&&M!==((d=qe(M))==null?void 0:d.activeElement)&&(M==null||M.focus({preventScroll:!0}))},[a.listboxState,a.optionsElement]);let z=h(d=>{var M,Q;switch(q.dispose(),d.key){case P.Space:if(a.searchQuery!=="")return d.preventDefault(),d.stopPropagation(),O.search(d.key);case P.Enter:if(d.preventDefault(),d.stopPropagation(),a.activeOptionIndex!==null){let{dataRef:ae}=a.options[a.activeOptionIndex];O.onChange(ae.current.value)}a.mode===0&&(A.flushSync(()=>O.closeListbox()),(M=a.buttonElement)==null||M.focus({preventScroll:!0}));break;case U(a.orientation,{vertical:P.ArrowDown,horizontal:P.ArrowRight}):return d.preventDefault(),d.stopPropagation(),O.goToOption(I.Next);case U(a.orientation,{vertical:P.ArrowUp,horizontal:P.ArrowLeft}):return d.preventDefault(),d.stopPropagation(),O.goToOption(I.Previous);case P.Home:case P.PageUp:return d.preventDefault(),d.stopPropagation(),O.goToOption(I.First);case P.End:case P.PageDown:return d.preventDefault(),d.stopPropagation(),O.goToOption(I.Last);case P.Escape:d.preventDefault(),d.stopPropagation(),A.flushSync(()=>O.closeListbox()),(Q=a.buttonElement)==null||Q.focus({preventScroll:!0});return;case P.Tab:d.preventDefault(),d.stopPropagation(),A.flushSync(()=>O.closeListbox()),lt(a.buttonElement,d.shiftKey?pe.Previous:pe.Next);break;default:d.key.length===1&&(O.search(d.key),q.setTimeout(()=>O.clearSearch(),350));break}}),ne=(o=a.buttonElement)==null?void 0:o.id,oe=i.useMemo(()=>({open:a.listboxState===0}),[a.listboxState]),K=be(f?ee():{},{id:u,ref:te,"aria-activedescendant":a.activeOptionIndex===null||(n=a.options[a.activeOptionIndex])==null?void 0:n.id,"aria-multiselectable":a.mode===1?!0:void 0,"aria-labelledby":ne,"aria-orientation":a.orientation,onKeyDown:z,role:"listbox",tabIndex:a.listboxState===0?0:void 0,style:{...p.style,...Y,"--button-width":Je(a.buttonElement,!0).width},...ze(R)}),re=j();return y.createElement(Xe,{enabled:c?e.static||T:!1},y.createElement(W.Provider,{value:a.mode===1?a:{...a,isSelected:w}},re({ourProps:K,theirProps:p,slot:oe,defaultTag:wt,features:Dt,visible:_,name:"Listbox.Options"})))}let kt="div";function _t(e,t){let o=i.useId(),{id:n=`headlessui-listbox-option-${o}`,disabled:r=!1,value:u,...m}=e,c=i.useContext(he)===!0,l=G("Listbox.Option"),b=X("Listbox.Option"),p=l.activeOptionIndex!==null?l.options[l.activeOptionIndex].id===n:!1,f=l.isSelected(u),S=i.useRef(null),x=We(S),a=Ze({disabled:r,value:u,domRef:S,get textValue(){return x()}}),O=H(t,S,g=>{g?l.listRef.current.set(n,g):l.listRef.current.delete(n)});se(()=>{if(!l.__demoMode&&l.listboxState===0&&p&&l.activationTrigger!==0)return Ye().requestAnimationFrame(()=>{var g,w;(w=(g=S.current)==null?void 0:g.scrollIntoView)==null||w.call(g,{block:"nearest"})})},[S,p,l.__demoMode,l.listboxState,l.activationTrigger,l.activeOptionIndex]),se(()=>{if(!c)return b.registerOption(n,a)},[a,n,c]);let N=h(g=>{var w;if(r)return g.preventDefault();b.onChange(u),l.mode===0&&(A.flushSync(()=>b.closeListbox()),(w=l.buttonElement)==null||w.focus({preventScroll:!0}))}),k=h(()=>{if(r)return b.goToOption(I.Nothing);b.goToOption(I.Specific,n)}),T=et(),R=h(g=>{T.update(g),!r&&(p||b.goToOption(I.Specific,n,0))}),L=h(g=>{T.wasMoved(g)&&(r||p||b.goToOption(I.Specific,n,0))}),D=h(g=>{T.wasMoved(g)&&(r||p&&b.goToOption(I.Nothing))}),E=i.useMemo(()=>({active:p,focus:p,selected:f,disabled:r,selectedOption:f&&c}),[p,f,r,c]),_=c?{}:{id:n,ref:O,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":f,disabled:void 0,onClick:N,onFocus:k,onPointerEnter:R,onMouseEnter:R,onPointerMove:L,onMouseMove:L,onPointerLeave:D,onMouseLeave:D},F=j();return!f&&c?null:F({ourProps:_,theirProps:m,slot:E,defaultTag:kt,name:"Listbox.Option"})}let Ft=i.Fragment;function At(e,t){let{options:o,placeholder:n,...r}=e,u={ref:H(t)},m=G("ListboxSelectedOption"),c=i.useMemo(()=>({}),[]),l=m.value===void 0||m.value===null||m.mode===1&&Array.isArray(m.value)&&m.value.length===0,b=j();return y.createElement(he.Provider,{value:!0},b({ourProps:u,theirProps:{...r,children:y.createElement(y.Fragment,null,n&&l?n:o)},slot:c,defaultTag:Ft,name:"ListboxSelectedOption"}))}let Nt=V(Tt),Bt=V(Mt),Qt=Pe,Ut=V(Ct),Kt=V(_t),Vt=V(At),Gt=Object.assign(Nt,{Button:Bt,Label:Qt,Options:Ut,Option:Kt,SelectedOption:Vt});export{Ut as G,Gt as M,Bt as N,ct as T,Kt as V,vt as j,pt as l,ft as p,ht as u};
